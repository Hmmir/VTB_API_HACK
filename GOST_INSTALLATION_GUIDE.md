# üîí –ò–ù–°–¢–†–£–ö–¶–ò–Ø: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ GOST –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ api.gost.bankingapi.ru:8443

## üéØ –¶–ï–õ–¨
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å GOST API –∑–∞ 4 —á–∞—Å–∞.

## ‚ö° –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢ (30 –º–∏–Ω—É—Ç)

### –®–∞–≥ 1: –°–∫–∞—á–∞—Ç—å –ö—Ä–∏–ø—Ç–æ–ü–†–û CSP (10 –º–∏–Ω)

1. **–û—Ç–∫—Ä–æ–π –±—Ä–∞—É–∑–µ—Ä:**
   ```
   https://www.cryptopro.ru/products/csp/downloads
   ```

2. **–°–∫–∞—á–∞–π —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫:**
   - –í–µ—Ä—Å–∏—è: **–ö—Ä–∏–ø—Ç–æ–ü–†–û CSP 5.0**
   - –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: **Windows x64**
   - Trial: **90 –¥–Ω–µ–π –±–µ—Å–ø–ª–∞—Ç–Ω–æ** (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è)
   
3. **–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞):**
   ```
   https://www.cryptopro.ru/sites/default/files/products/csp/50/12935/csp50r4-KC1-12935.exe
   ```

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ö—Ä–∏–ø—Ç–æ–ü–†–û CSP (15 –º–∏–Ω)

1. **–ó–∞–ø—É—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫** (`csp50r4-KC1-12935.exe`)

2. **–í—ã–±–µ—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
   - ‚úÖ –ö—Ä–∏–ø—Ç–æ–ü–†–û CSP
   - ‚úÖ –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –£–¶
   - ‚úÖ –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
   - ‚úÖ –ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–ª—é—á–µ–π

3. **–£—Å—Ç–∞–Ω–æ–≤–∏** (–Ω–∞–∂–∏–º–∞–π "–î–∞–ª–µ–µ" ‚Üí "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å")

4. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä** (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É (5 –º–∏–Ω)

```powershell
# –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –æ—Ç–∫—Ä–æ–π PowerShell –∏ –ø—Ä–æ–≤–µ—Ä—å:
csptest -keyset -enum_cont -fqcn -verifycontext

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:
# Total: OK
```

## üìö –î–ï–¢–ê–õ–¨–ù–ê–Ø –ò–ù–°–¢–†–£–ö–¶–ò–Ø (4 —á–∞—Å–∞)

### –ß–ê–°–¢–¨ 1: –ö—Ä–∏–ø—Ç–æ–ü–†–û CSP (1 —á–∞—Å)

#### 1.1. –°–∫–∞—á–∏–≤–∞–Ω–∏–µ (10 –º–∏–Ω)

**–í–∞—Ä–∏–∞–Ω—Ç A: –° –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞**
1. –ó–∞–π–¥–∏ –Ω–∞ https://www.cryptopro.ru/
2. –ü—Ä–æ–¥—É–∫—Ç—ã ‚Üí CSP ‚Üí –°–∫–∞—á–∞—Ç—å
3. –í—ã–±–µ—Ä–∏ "–ö—Ä–∏–ø—Ç–æ–ü–†–û CSP 5.0 –¥–ª—è Windows"
4. Trial –≤–µ—Ä—Å–∏—è (90 –¥–Ω–µ–π)

**–í–∞—Ä–∏–∞–Ω—Ç B: –ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞**
```
https://www.cryptopro.ru/products/csp/downloads
```

**–ß—Ç–æ —Å–∫–∞—á–∞—Ç—å:**
- –û—Å–Ω–æ–≤–Ω–æ–π –ø–∞–∫–µ—Ç: `csp50r4-KC1-xxxxx.exe` (~50 MB)
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

#### 1.2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (20 –º–∏–Ω)

1. **–ó–∞–ø—É—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞**
   - –ü—Ä–∞–≤—ã–π –∫–ª–∏–∫ ‚Üí "–ó–∞–ø—É—Å—Ç–∏—Ç—å –æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞"

2. **–ú–∞—Å—Ç–µ—Ä —É—Å—Ç–∞–Ω–æ–≤–∫–∏:**
   ```
   –≠–∫—Ä–∞–Ω 1: –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
   ‚Üí –ù–∞–∂–º–∏ "–î–∞–ª–µ–µ"
   
   –≠–∫—Ä–∞–Ω 2: –õ–∏—Ü–µ–Ω–∑–∏–æ–Ω–Ω–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ
   ‚Üí –ü—Ä–æ—á–∏—Ç–∞–π (–∏–ª–∏ –Ω–µ—Ç üòÑ) ‚Üí "–ü—Ä–∏–Ω–∏–º–∞—é" ‚Üí "–î–∞–ª–µ–µ"
   
   –≠–∫—Ä–∞–Ω 3: –í—ã–±–æ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
   ‚Üí –í—ã–±–µ—Ä–∏ –í–°–Å:
      ‚úÖ –ö—Ä–∏–ø—Ç–æ–ü–†–û CSP (–±–∞–∑–æ–≤—ã–π)
      ‚úÖ –ö—Ä–∏–ø—Ç–æ–ø—Ä–æ–≤–∞–π–¥–µ—Ä Microsoft Base/Enhanced
      ‚úÖ –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã —É–¥–æ—Å—Ç–æ–≤–µ—Ä—è—é—â–∏—Ö —Ü–µ–Ω—Ç—Ä–æ–≤
      ‚úÖ –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
      ‚úÖ SDK (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤)
   ‚Üí "–î–∞–ª–µ–µ"
   
   –≠–∫—Ä–∞–Ω 4: –ü–∞–ø–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
   ‚Üí –û—Å—Ç–∞–≤—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: C:\Program Files\Crypto Pro\
   ‚Üí "–î–∞–ª–µ–µ"
   
   –≠–∫—Ä–∞–Ω 5: –£—Å—Ç–∞–Ω–æ–≤–∫–∞
   ‚Üí "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å"
   ‚Üí –ü–æ–¥–æ–∂–¥–∏ 3-5 –º–∏–Ω—É—Ç
   
   –≠–∫—Ä–∞–Ω 6: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ
   ‚Üí "–ì–æ—Ç–æ–≤–æ"
   ```

3. **–í–ê–ñ–ù–û: –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞**
   ```
   –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä –°–ï–ô–ß–ê–°!
   
   –ü—Ä–∏—á–∏–Ω–∞: –ö—Ä–∏–ø—Ç–æ–ü–†–û –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å Windows –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–∏—Å—Ç–µ–º—ã.
   –ë–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å!
   ```

#### 1.3. –ü—Ä–æ–≤–µ—Ä–∫–∞ (10 –º–∏–Ω)

**–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏:**

1. **–û—Ç–∫—Ä–æ–π PowerShell –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞**

2. **–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –ö—Ä–∏–ø—Ç–æ–ü–†–û —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω:**
   ```powershell
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏
   csptest -version
   
   # –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
   # CSP version: 5.0.12935
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã:**
   ```powershell
   csptest -keyset -enum_cont -fqcn -verifycontext
   
   # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
   # Total: OK
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –£–¶:**
   ```powershell
   certmgr.msc
   # –î–æ–ª–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å—Å—è –æ–∫–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏
   # –í "–î–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∫–æ—Ä–Ω–µ–≤—ã–µ —Ü–µ–Ω—Ç—Ä—ã —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏" –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ì–û–°–¢–æ–≤—ã–µ –£–¶
   ```

#### 1.4. –ü–æ–ª—É—á–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (20 –º–∏–Ω)

**–í–∞—Ä–∏–∞–Ω—Ç A: –°–æ–∑–¥–∞—Ç—å —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π (–±—ã—Å—Ç—Ä–æ, –Ω–æ –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å)**

```powershell
# –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–ª—é—á–µ–π
csptest -keygen -cont "TestGost" -provtype 80

# –°–æ–∑–¥–∞—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
# (–∑–¥–µ—Å—å –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è GUI, —ç—Ç–æ —Å–ª–æ–∂–Ω–æ —á–µ—Ä–µ–∑ PowerShell)
```

**–í–∞—Ä–∏–∞–Ω—Ç B: –ü–æ–ª—É—á–∏—Ç—å –æ—Ç —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –£–¶ –ö—Ä–∏–ø—Ç–æ–ü–†–û (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)**

1. –û—Ç–∫—Ä–æ–π –±—Ä–∞—É–∑–µ—Ä: https://www.cryptopro.ru/certsrv/
2. –°–ª–µ–¥—É–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –£–¶
3. –°–∫–∞—á–∞–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (.cer —Ñ–∞–π–ª)
4. –£—Å—Ç–∞–Ω–æ–≤–∏ –¥–≤–æ–π–Ω—ã–º –∫–ª–∏–∫–æ–º

**–í–∞—Ä–∏–∞–Ω—Ç C: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –∏–∑ –∫–æ–º–ø–ª–µ–∫—Ç–∞ (–ü–†–û–©–ï –í–°–ï–ì–û)**

```powershell
# –ö—Ä–∏–ø—Ç–æ–ü–†–û –∏–¥–µ—Ç —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏
# –û–Ω–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤:
cd "C:\Program Files\Crypto Pro\CSP\Samples\"

# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π —Ç–µ—Å—Ç–æ–≤—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
certutil -addstore -user My "test_cert.cer"
```

### –ß–ê–°–¢–¨ 2: OpenSSL —Å GOST engine (1 —á–∞—Å)

#### 2.1. –°–∫–∞—á–∞—Ç—å OpenSSL —Å GOST (15 –º–∏–Ω)

**–í–∞—Ä–∏–∞–Ω—Ç A: –ì–æ—Ç–æ–≤–∞—è —Å–±–æ—Ä–∫–∞ (–†–ï–ö–û–ú–ï–ù–î–£–Æ)**

1. –ó–∞–π–¥–∏ –Ω–∞: https://github.com/gost-engine/engine/releases
2. –ù–∞–π–¥–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π release (–Ω–∞–ø—Ä–∏–º–µ—Ä, v3.0.3)
3. –°–∫–∞—á–∞–π –¥–ª—è Windows: `gost-engine-x64-windows.zip`

**–í–∞—Ä–∏–∞–Ω—Ç B: –ö–æ–º–ø–∏–ª—è—Ü–∏—è (—Å–ª–æ–∂–Ω–æ, 2+ —á–∞—Å–∞)**
```bash
# –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é, –µ—Å–ª–∏ –Ω–µ –æ–ø—ã—Ç–µ–Ω —Å –∫–æ–º–ø–∏–ª—è—Ü–∏–µ–π
git clone https://github.com/gost-engine/engine.git
# ... –º–Ω–æ–≥–æ —à–∞–≥–æ–≤ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
```

#### 2.2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ GOST engine (20 –º–∏–Ω)

1. **–†–∞—Å–ø–∞–∫—É–π —Å–∫–∞—á–∞–Ω–Ω—ã–π –∞—Ä—Ö–∏–≤**
   ```
   –†–∞—Å–ø–∞–∫—É–π –≤: C:\OpenSSL-GOST\
   ```

2. **–ù–∞–π–¥–∏ –≥–¥–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω OpenSSL**
   ```powershell
   openssl version -d
   # –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç: OPENSSLDIR: "C:/Program Files/OpenSSL-Win64/ssl"
   ```

3. **–°–∫–æ–ø–∏—Ä—É–π GOST engine –≤ –Ω—É–∂–Ω—É—é –ø–∞–ø–∫—É**
   ```powershell
   # –ò—Å—Ö–æ–¥–Ω–∞—è –ø–∞–ø–∫–∞ (–≥–¥–µ —Ä–∞—Å–ø–∞–∫–æ–≤–∞–ª)
   $source = "C:\OpenSSL-GOST\bin\gost.dll"
   
   # –¶–µ–ª–µ–≤–∞—è –ø–∞–ø–∫–∞ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–≤–æ–µ–≥–æ OpenSSL)
   $target = "C:\Program Files\OpenSSL-Win64\bin\engines-3\"
   
   # –ö–æ–ø–∏—Ä—É–π
   Copy-Item $source $target
   ```

4. **–ù–∞—Å—Ç—Ä–æ–π openssl.cnf**
   ```powershell
   # –û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª
   notepad "C:\Program Files\OpenSSL-Win64\ssl\openssl.cnf"
   
   # –î–æ–±–∞–≤—å –í –ù–ê–ß–ê–õ–û —Ñ–∞–π–ª–∞:
   ```
   
   ```ini
   openssl_conf = openssl_init

   [openssl_init]
   engines = engine_section

   [engine_section]
   gost = gost_section

   [gost_section]
   engine_id = gost
   dynamic_path = C:/Program Files/OpenSSL-Win64/bin/engines-3/gost.dll
   default_algorithms = ALL
   ```

#### 2.3. –ü—Ä–æ–≤–µ—Ä–∫–∞ GOST engine (10 –º–∏–Ω)

```powershell
# –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ engine –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
openssl engine -t gost

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
# (gost) Reference implementation of GOST engine
#      [ available ]
```

–ï—Å–ª–∏ –æ—à–∏–±–∫–∞ - –ø—Ä–æ–≤–µ—Ä—å –ø—É—Ç–∏ –≤ openssl.cnf!

#### 2.4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ö—Ä–∏–ø—Ç–æ–ü–†–û + OpenSSL (15 –º–∏–Ω)

```powershell
# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å OpenSSL –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ö—Ä–∏–ø—Ç–æ–ü–†–û –∫–∞–∫ –ø—Ä–æ–≤–∞–π–¥–µ—Ä

# –í openssl.cnf –¥–æ–±–∞–≤—å:
```

```ini
[cryptopro_section]
engine_id = gost
dynamic_path = C:/Program Files/Crypto Pro/CSP/cppkg.dll
CRYPT_PARAMS = id-GostR3410-2001-CryptoPro-A-ParamSet
```

### –ß–ê–°–¢–¨ 3: curl —Å GOST (30 –º–∏–Ω—É—Ç)

#### 3.1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å curl —Å OpenSSL backend (15 –º–∏–Ω)

**–ü—Ä–æ–±–ª–µ–º–∞:** Windows curl –∏—Å–ø–æ–ª—å–∑—É–µ—Ç schannel (–±–µ–∑ GOST)

**–†–µ—à–µ–Ω–∏–µ A: WSL (Ubuntu) - –ü–†–û–©–ï**

1. –£—Å—Ç–∞–Ω–æ–≤–∏ WSL:
   ```powershell
   wsl --install
   # –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Å—å
   ```

2. –ó–∞–π–¥–∏ –≤ Ubuntu:
   ```bash
   wsl
   ```

3. –£—Å—Ç–∞–Ω–æ–≤–∏ curl —Å OpenSSL:
   ```bash
   sudo apt update
   sudo apt install curl openssl libengine-gost-openssl
   ```

**–†–µ—à–µ–Ω–∏–µ B: Git Bash curl**

1. –£—Å—Ç–∞–Ω–æ–≤–∏ Git for Windows: https://git-scm.com/download/win
2. Git Bash curl —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç OpenSSL (–Ω–æ –±–µ–∑ GOST engine)
3. –ù—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å GOST engine (—Å–º. –≤—ã—à–µ)

#### 3.2. –ü—Ä–æ–≤–µ—Ä–∫–∞ (5 –º–∏–Ω)

```bash
# –ü—Ä–æ–≤–µ—Ä—å –≤–µ—Ä—Å–∏—é
curl --version | grep OpenSSL

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
# curl 7.x.x ... OpenSSL/3.x.x

# –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å schannel!
```

#### 3.3. –¢–µ—Å—Ç GOST API (10 –º–∏–Ω)

```bash
# –ü–æ–ø—Ä–æ–±—É–π –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ GOST API
curl -v --cert /path/to/cert.pem --key /path/to/key.pem \
  --data "grant_type=client_credentials&client_id=team075&client_secret=1IbEJkXNjswkQLNCqZiYW4mgVSvuC8Di" \
  https://api.gost.bankingapi.ru:8443/auth/realms/kubernetes/protocol/openid-connect/token

# –ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç - —É–≤–∏–¥–∏—à—å 200 OK –∏ token!
```

### –ß–ê–°–¢–¨ 4: Python + GOST (1 —á–∞—Å)

#### 4.1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Python –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (10 –º–∏–Ω)

```bash
# –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ
pip install cryptography pyopenssl

# –î–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –ö—Ä–∏–ø—Ç–æ–ü–†–û
pip install pycryptopro
```

#### 4.2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å httpx –¥–ª—è GOST (20 –º–∏–Ω)

**–û–±–Ω–æ–≤–∏—Ç—å backend/app/integrations/vtb_api.py:**

```python
import ssl
import httpx
from cryptography import x509
from cryptography.hazmat.backends import default_backend

class OpenBankingClient:
    def __init__(self, use_gost=False):
        self.use_gost = use_gost
        
        if use_gost:
            # –°–æ–∑–¥–∞—Ç—å SSL context —Å GOST –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π
            ssl_context = ssl.create_default_context()
            
            # –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –ö—Ä–∏–ø—Ç–æ–ü–†–û
            cert_path = "/path/to/cryptopro/cert.pem"
            key_path = "/path/to/cryptopro/key.pem"
            
            ssl_context.load_cert_chain(cert_path, key_path)
            
            # –†–∞–∑—Ä–µ—à–∏—Ç—å –ì–û–°–¢-—à–∏—Ñ—Ä—ã
            ssl_context.set_ciphers('GOST2012-GOST8912-GOST8912')
            
            self.client = httpx.AsyncClient(
                timeout=30.0,
                verify=ssl_context
            )
        else:
            self.client = httpx.AsyncClient(timeout=30.0)
```

#### 4.3. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –∏–∑ –ö—Ä–∏–ø—Ç–æ–ü–†–û (20 –º–∏–Ω)

```powershell
# –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤ PEM —Ñ–æ—Ä–º–∞—Ç
certutil -store -user My

# –ù–∞–π–¥–∏ –Ω—É–∂–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç, –∑–∞–ø–æ–º–Ω–∏ SHA1
$thumbprint = "ABC123..."

# –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π
$cert = Get-ChildItem Cert:\CurrentUser\My\$thumbprint
Export-Certificate -Cert $cert -FilePath "C:\gost-cert.cer"

# –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–π –≤ PEM
openssl x509 -inform DER -in C:\gost-cert.cer -out C:\gost-cert.pem

# –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π –∫–ª—é—á (—Å–ª–æ–∂–Ω–µ–µ, —á–µ—Ä–µ–∑ GUI –ö—Ä–∏–ø—Ç–æ–ü–†–û)
# –ü—É—Å–∫ ‚Üí –ö—Ä–∏–ø—Ç–æ–ü–†–û CSP ‚Üí –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–∞–º–∏
# ‚Üí –≠–∫—Å–ø–æ—Ä—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∑–∞–∫—Ä—ã—Ç–æ–≥–æ –∫–ª—é—á–∞
```

#### 4.4. –¢–µ—Å—Ç –∏–∑ Python (10 –º–∏–Ω)

```python
import asyncio
import httpx
import ssl

async def test_gost():
    ssl_context = ssl.create_default_context()
    ssl_context.load_cert_chain("C:/gost-cert.pem", "C:/gost-key.pem")
    ssl_context.set_ciphers('GOST2012-GOST8912-GOST8912')
    
    client = httpx.AsyncClient(verify=ssl_context, timeout=30.0)
    
    response = await client.post(
        "https://api.gost.bankingapi.ru:8443/auth/realms/kubernetes/protocol/openid-connect/token",
        data={
            "grant_type": "client_credentials",
            "client_id": "team075",
            "client_secret": "1IbEJkXNjswkQLNCqZiYW4mgVSvuC8Di"
        }
    )
    
    print(f"Status: {response.status_code}")
    print(f"Response: {response.json()}")
    
    await client.aclose()

asyncio.run(test_gost())
```

### –ß–ê–°–¢–¨ 5: –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (30 –º–∏–Ω)

#### 5.1. –ß–µ–∫–ª–∏—Å—Ç

- [ ] –ö—Ä–∏–ø—Ç–æ–ü–†–û CSP —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] `csptest -version` —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –¢–µ—Å—Ç–æ–≤—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] OpenSSL —Å GOST engine —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] `openssl engine -t gost` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç [available]
- [ ] curl –∏—Å–ø–æ–ª—å–∑—É–µ—Ç OpenSSL (–Ω–µ schannel)
- [ ] Python httpx –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å SSL context
- [ ] GOST API –æ—Ç–≤–µ—á–∞–µ—Ç 200 OK

#### 5.2. –¢–µ—Å—Ç —á–µ—Ä–µ–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

1. –í–æ–π–¥–∏ –∫–∞–∫ `team075-demo@financehub.ru`
2. –ü–æ–ø—Ä–æ–±—É–π –ø–æ–¥–∫–ª—é—á–∏—Ç—å –±–∞–Ω–∫
3. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏: `docker logs financehub_backend --tail 50`
4. –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: "‚úÖ Connected via GOST gateway"

#### 5.3. –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**

1. **"SSL handshake failed"**
   - –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
   - –ü—Ä–æ–≤–µ—Ä—å –ø—É—Ç—å –∫ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—É
   - –ü—Ä–æ–≤–µ—Ä—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª—É

2. **"engine not found"**
   - –ü—Ä–æ–≤–µ—Ä—å –ø—É—Ç–∏ –≤ openssl.cnf
   - –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ gost.dll –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–∞–ø–∫–µ
   - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ —Ç–µ—Ä–º–∏–Ω–∞–ª

3. **"certificate verify failed"**
   - –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –£–¶ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
   - –î–æ–±–∞–≤—å –∫–æ—Ä–Ω–µ–≤–æ–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤ –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ

4. **"connection refused"**
   - –ü—Ä–æ–≤–µ—Ä—å firewall
   - –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –ø–æ—Ä—Ç 8443 –æ—Ç–∫—Ä—ã—Ç
   - –ü–æ–ø—Ä–æ–±—É–π —á–µ—Ä–µ–∑ VPN (–µ—Å–ª–∏ –µ—Å—Ç—å)

## üéØ –ö–†–ê–¢–ö–ê–Ø –í–ï–†–°–ò–Ø (–µ—Å–ª–∏ —Ç–æ—Ä–æ–ø–∏—à—å—Å—è)

```powershell
# 1. –°–∫–∞—á–∞–π –∏ —É—Å—Ç–∞–Ω–æ–≤–∏ –ö—Ä–∏–ø—Ç–æ–ü–†–û CSP
https://www.cryptopro.ru/products/csp/downloads

# 2. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Å—å

# 3. –£—Å—Ç–∞–Ω–æ–≤–∏ WSL + Ubuntu
wsl --install
wsl

# 4. –í Ubuntu —É—Å—Ç–∞–Ω–æ–≤–∏ GOST –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
sudo apt update
sudo apt install curl openssl libengine-gost-openssl

# 5. –¢–µ—Å—Ç
curl -v https://api.gost.bankingapi.ru:8443

# –ï—Å–ª–∏ –≤–∏–¥–∏—à—å —á—Ç–æ-—Ç–æ –∫—Ä–æ–º–µ "handshake failed" - –ø—Ä–æ–≥—Ä–µ—Å—Å!
```

## üìû –ö–£–î–ê –û–ë–†–ê–©–ê–¢–¨–°–Ø –ó–ê –ü–û–ú–û–©–¨–Æ

1. **–¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ö—Ä–∏–ø—Ç–æ–ü–†–û:**
   - Email: support@cryptopro.ru
   - –§–æ—Ä—É–º: https://www.cryptopro.ru/forum2/

2. **GOST engine:**
   - GitHub Issues: https://github.com/gost-engine/engine/issues

3. **–û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—ã —Ö–∞–∫–∞—Ç–æ–Ω–∞:**
   - Telegram: @help_vtbapi
   - –°–ø—Ä–æ—Å–∏: "–ù—É–∂–Ω–∞ –ª–∏ –ø–æ–º–æ—â—å —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π GOST –¥–ª—è team075?"

## ‚ö° –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏:
1. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ GOST API
2. ‚úÖ –°–¥–µ–ª–∞–π —Å–∫—Ä–∏–Ω—à–æ—Ç—ã —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
3. ‚úÖ –û–±–Ω–æ–≤–∏ README.md —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
4. ‚úÖ –ó–∞–ø–∏—à–∏ –≤–∏–¥–µ–æ-–¥–µ–º–æ —Å GOST —Ä–µ–∂–∏–º–æ–º
5. ‚úÖ –î–æ–±–∞–≤—å –≤ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—é —Å–ª–∞–π–¥ "GOST Integration - LIVE!"

**–£–¥–∞—á–∏! –¢—ã —Å–ø—Ä–∞–≤–∏—à—å—Å—è! üí™üöÄ**


